---
import NavigationBtns from "@/components/blog/[blog_id]/NavigationBtns";
import HeroSection from "@/components/our-leadership/[team_id]/HeroSection";
import { getPageContent } from "@/libs/contents/wordpress/data";
import descriptionExtractor from "@/libs/hooks/descriptionExtractor";
import Layout from "@/layouts/Layout.astro";



export async function getStaticPaths() {
  const teams: TeamsType = await getPageContent("teams");
  return teams.teams.edges.map(({ node: { slug } }) => {
    return {
      params: { team_id: slug },
    };
  });
}

const { team_id } = Astro.params;
const teams: TeamsType = await getPageContent("teams");

const data = teams.teams.edges.filter((item) => item.node.slug === team_id)[0];

const index = teams.teams.edges.findIndex((item) => item.node.slug === team_id);

const buttons = [
  {
    title: "Prev",
    link:
      index === teams.teams.edges.length - 1
        ? ""
        : `/our-leadership/${teams.teams.edges[index + 1].node.slug}`,
  },
  {
    title: "Next",
    link:
      index === 0
        ? ""
        : `/our-leadership/${teams.teams.edges[index - 1].node.slug}`,
  },
];
---

<Layout>
  <HeroSection
    heroSectionImage={data.node.acf.teamMemberDetails.image.sourceUrl}
    title={data.node.acf.teamMemberDetails.name}
    description={descriptionExtractor(
      data.node.acf.teamMemberDetails.description
    )}
    position={data.node.acf.teamMemberDetails.designation}
  />

  <NavigationBtns buttons={buttons} />
</Layout>
